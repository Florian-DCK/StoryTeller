<form enctype="multipart/form-data" method="POST" action="/auth/register" class="relative self space-y-2 w-full md:w-1/2 flex flex-col items-center py-6 border-borders border justify-center my-auto px-4 md:px-0">
    <h1 class="font-family-joan flex flex-col items-center font-bold text-3xl md:text-4xl mb-7 justify-center uppercase after:content-[''] after:block after:w-1/2 after:h-0.5 after:bg-borders after:rounded-full after:mt-2">S'inscrire</h1>
    <div class="flex flex-col md:flex-row items-center justify-center md:justify-evenly flex-1 gap-4 w-full">
        <div class="flex flex-col text-lg md:text-xl gap-1 w-full md:w-auto">
            <label for="username" class="font-family-joan">Nom d'utilisateur *</label>
            <input class="border-4 border-borders border-double px-1 font-family-joan focus:outline-none w-full md:w-72" type="text" name="username" id="username" required>
        </div>
        <div class="flex flex-col text-lg md:text-xl gap-1 w-full md:w-auto">
            <label for="password" class="font-family-joan">Mot de passe *</label>
            <input class="border-4 border-borders border-double px-1 focus:outline-none w-full md:w-72" type="password" name="password" id="password" required>
        </div>
    </div>    
    <div class="flex flex-col md:flex-row items-center justify-center md:justify-evenly flex-1 gap-4 w-full">
        <div class="flex flex-col text-lg md:text-xl gap-1 w-full md:w-auto">
            <label for="email" class="font-family-joan">Address mail *</label>
            <input class="border-4 border-borders border-double px-1 font-family-joan focus:outline-none w-full md:w-72" type="text" name="email" id="email" required>
        </div>
        <div class="flex flex-col text-lg md:text-xl gap-1 w-full md:w-auto">
            <label for="confirmPassword" class="font-family-joan">Confirmer le mot de passe *</label>
            <input class="border-4 border-borders border-double px-1 focus:outline-none w-full md:w-72" type="password" name="ConfirmPassword" id="confirmPassword" required>
        </div>
    </div>
    <div class="flex flex-col md:flex-row items-center justify-center md:justify-evenly flex-1 gap-4 mb-5 w-full">
        <div class="flex flex-col text-lg md:text-xl gap-1 w-full md:w-auto">
            <label for="avatar" class="font-family-joan">Avatar</label>
            <div class="relative w-full md:w-auto">
                <input class="opacity-0 absolute inset-0 w-full h-10 cursor-pointer" type="file" name="avatar" id="avatar" accept="image/*" onchange="previewImage(event)">
                <div class="border-4 border-borders border-double px-1 font-family-joan h-10 w-full md:w-72 focus:outline-none flex items-center">
                    <span id="fileName" class="truncate">Choisir un fichier</span>
                </div>
            </div>
            <div class="mt-2 w-full md:w-auto">
                <img id="avatarPreview" class="hidden border-4 border-borders border-double w-full md:w-72 h-32 object-contain" alt="Avatar preview">
            </div>
        </div>
        <div class="flex flex-col text-lg md:text-xl gap-1 w-full md:w-auto">
            <label for="bio" class="font-family-joan">A propos de vous </label>
            <textarea cols="" class="border-4 border-borders border-double px-1 h-44 w-full md:w-72 focus:outline-none resize-none" type="text" name="bio" id="bio"></textarea>
        </div>
    </div>
    <div class="w-full md:w-1/2 flex flex-col items-center">
        <button type="submit" class="cursor-pointer border p-2 text-lg md:text-xl mb-2 uppercase font-family-joan">S'inscrire</button>
    </div>
    <a href="/auth" class="mt-4 md:mt-0"><button type="button" class="cursor-pointer text-sm md:text-base md:absolute md:bottom-0 md:right-0 md:m-1">Déjà inscrit ? Connectez vous !</button></a>
</form>

<script>
function previewImage(event) {
    const input = event.target;
    const preview = document.getElementById('avatarPreview');
    const fileNameDisplay = document.getElementById('fileName');
    
    if (input.files && input.files[0]) {
        const reader = new FileReader();
        
        reader.onload = function(e) {
            preview.src = e.target.result;
            preview.classList.remove('hidden');
        }
        
        reader.readAsDataURL(input.files[0]);
        
        // Mettre à jour le nom du fichier affiché
        fileNameDisplay.textContent = input.files[0].name;
    } else {
        preview.classList.add('hidden');
        fileNameDisplay.textContent = "Choisir un fichier";
    }
}
</script>